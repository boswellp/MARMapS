Multi-factor Analysis for Recharge Mapping Suitability
(MARMapS)
Galen Gorski
ggorski@ucsc.edu
01/19/2020

MARMaps is a free, open-source tool for making interactive and transparent suitability maps. It is currently in development. For questions, bugs, feedback or comments please contact ggorski@ucsc.edu. The following document has guidelines for use, see the tutorial for an example case. The application can be found https://ggorski.shinyapps.io/marmaps/

This tool was developed in collaboration with Daniel Goode, Michael van der Valk, and Andrew Fisher. Some data for the tutorial were generated by Sarah Beganskas.

General overview
	This is a general-use tool, that is not meant to replace other mapping software such as ArcGIS or QGIS. It is intended to allow the user to gain intuition and understanding of the decisions that are required to create landscape suitability maps, and how those decisions affect the final map. As such, the input data should be preprocessed so that the individual factors have the same extent, resolution, and projection.
	The tool is made up of two tabs. In the first tab, “Factor Suitability Ranking”, the user inputs individual rasters that contain spatial data for the study area (e.g. land use). The user then selects the range of values that are suitable for that individual factor. This can be done for an unlimited number of factors.
	In the second tab, “Weighting and Composite Mapping”, the user chooses the weights to apply to each factor as they are linearly combined to create the final composite suitability map. The composite suitability map can then be downloaded as a .tiff file for display or use in other programs.

Input data
	Input files must be rasters in .tiff format, and the rasters must have the same extent and resolution. The rasters do not need to be geo-referenced, but if they are, they must have the same projection. When a file is added, the factor is automatically displayed alongside the individual factor suitability. A slider bar appears, which can be used to select a suitable range of values for that factor.
	The dropdown menu “Choose Plotting Scale” allows the user to select the plotting scale from a number of different options including “Categorical”. “Categorical” should be selected for data with discrete values such as land use data, or geological unit. For categorical data, it is often best to preprocess this data in another program such as ArcGIS to group categories and/or to ensure that there are a reasonable number of categories (i.e. <~30) for the factor.
	For categorical data, a raster code file can be uploaded, using the “Upload Raster Codes” function to facilitate plotting and selecting suitable areas. A raster code file will map the raster values to user-supplied codes, for example, 1 = Forest, 2 = Urban etc. The raster code file must be a .csv file with two columns. Column 1 must have the header ID, and column 2 must have the header code.


An example raster code file for a land use factor

Factor mapping
	Once data are uploaded and displayed in the “Factor Suitability Ranking” tab, the user can select the values that are suitable using the slider bar, or the checkboxes if the data are categorical. Once the suitable ranges or categories have been selected, the user must click the “Classify” button to show the suitable areas in map view on the righthand side of the page.
	To label the factor with a title and data units, type in the “Name” and “Units” box on the left, and the input should appear above both maps, the legend, and the slider. These names will help the user identify the factors when choosing their weights in the next tab. If the suitable range is discontinuous (e.g. 0-3 AND 6-10), add a new slider bar by clicking the “Add New Range” button.

Weighting and composite mapping
In the “Weighting and Composite Mapping” tab, the factors uploaded in the “Factor Suitability Ranking” tab are aggregated to make a composite suitability map. Initially, all factors are given even weights, but that can be adjusted using the sliders to the right. Factor weights are identified by the user-supplied name assigned to the factor in the first tab, typed into the “Name” box. Below the factor weights, the sum of weights is reported. 
Potential site locations can be uploaded as point data using the “Upload Site Locations” function. These data must be .shp files, and will automatically be plotted on the composite map. The composite map can be downloaded as a .tiff file using the “Download Map” button. 
